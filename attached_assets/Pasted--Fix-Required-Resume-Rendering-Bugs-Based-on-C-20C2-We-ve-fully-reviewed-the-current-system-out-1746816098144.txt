üîß Fix Required: Resume Rendering Bugs (Based on C-20C2)
We‚Äôve fully reviewed the current system output and code structure. The resume is breaking visually, structurally, and functionally across multiple layers. Below is a comprehensive list of fixes you need to implement, with clear instructions and context.

You must check and update:

resume.html

openai.ts

pdf-generator.ts

Handlebars helpers (if needed)

‚úÖ 1. SUMMARY BREAKS ACROSS MULTIPLE PAGES
What‚Äôs wrong:
The summary renders as multiple separate lines, sometimes across 2‚Äì3 pages.

Fix:
In resume.html, update the .summary style block:

css
Copy
Edit
.summary {
  page-break-inside: avoid;
  white-space: normal;
  text-align: left;
  line-height: 1.4;
  width: 100%;
  max-width: none;
}
This ensures the summary stays together on one page and reads as a single, clean paragraph.

‚úÖ 2. ‚ÄúPROFESSIONAL EXPERIENCE‚Äù IS RENDERED INSIDE SKILLS
What‚Äôs wrong:
The string ‚ÄúPROFESSIONAL EXPERIENCE‚Äù is rendering mid-way through the SKILLS section, likely due to a misplaced HTML comment or broken section nesting.

Fix:
In resume.html, find and delete or relocate any in-template comment like:

html
Copy
Edit
<!-- PROFESSIONAL EXPERIENCE SECTION - With clear margin-top to ensure separation -->
Do not nest it inside a <span> or inside another section block. If needed, move it above the corresponding <section>.

‚úÖ 3. MULTIPLE ‚ÄúPROFESSIONAL EXPERIENCE‚Äù HEADERS
What‚Äôs wrong:
‚ÄúPROFESSIONAL EXPERIENCE‚Äù shows up twice ‚Äî once incorrectly, once correctly.

Fix:
Ensure that only one section renders with this header, in the proper order:

Summary

Skills

Languages

PROFESSIONAL EXPERIENCE

Education

Additional Experience

Check for duplicate section openings in resume.html.

‚úÖ 4. RESUME IS TOO LONG ‚Äî OUTPUT IS 5+ PAGES
What‚Äôs wrong:
The resume overflows dramatically. Margins and block spacing are too large.

Fixes:

In resume.html, reduce margin-top values across all sections to 12px or less

Add this global rule to the stylesheet:

css
Copy
Edit
section,
.summary,
.skills,
.experience,
.education,
.additional {
  page-break-inside: avoid;
  break-inside: avoid;
}
This will prevent uncontrolled section splitting.

‚úÖ 5. ‚ÄúLANGUAGES‚Äù SECTION IS STILL MISSING
What‚Äôs wrong:
The JSON contains a Languages block, but it‚Äôs not rendered in the PDF.

Fix:
In resume.html, inside the SKILLS section, add the following after rendering general skills:

handlebars
Copy
Edit
{{#each skills}}
  {{#if (eq category "Languages")}}
    <div class="section-title" style="margin-top: 10px;">LANGUAGES</div>
    <div class="skills">
      {{#each this.items}}
        <span style="margin-right: 6px;">{{this}}</span>
      {{/each}}
    </div>
  {{/if}}
{{/each}}
This guarantees ‚ÄúLanguages‚Äù will appear cleanly as its own block.

‚úÖ 6. VERB REPETITION IN BULLETS
What‚Äôs wrong:
Too many bullets start with the same verb (‚ÄúLed‚Äù, ‚ÄúManaged‚Äù, ‚ÄúHandled‚Äù), especially in VIAARQ and Civil Infrastructure roles.

Fix:
In openai.ts, update the removeBulletRepetition() function to:

Track the first verb across the entire experience block (not just adjacent lines)

Rewrite later bullets if a verb appears more than 2 times

‚úÖ 7. EDUCATION FORMATTING IS INCONSISTENT
What‚Äôs wrong:

‚ÄúColumbia University via Coursera‚Äù appears as one string

No spacing between items

Location and year sometimes jammed together

Fix:
Update openai.ts so that:

institution = "Columbia University"

additionalInfo = "via Coursera"

In resume.html, update the education block to:

handlebars
Copy
Edit
<div class="education-institution"><strong>{{institution}}</strong> ‚Äî {{location}}</div>
<div class="education-degree">{{degree}}, {{year}}</div>
{{#if additionalInfo}}
  <div class="education-details">{{additionalInfo}}</div>
{{/if}}
This standardizes layout and allows optional extra info.

‚úÖ 8. ‚ÄúADDITIONAL EXPERIENCE‚Äù LOOKS LIKE A FOOTNOTE
What‚Äôs wrong:
Single sentence. No formatting. No scannability.

Fix:
In resume.html, replace the existing rendering block with:

handlebars
Copy
Edit
<div class="section-title">ADDITIONAL EXPERIENCE</div>
<ul class="additional">
  {{#each (splitLines additionalExperience)}}
    <li>{{this}}</li>
  {{/each}}
</ul>
Also register the following Handlebars helper:

ts
Copy
Edit
Handlebars.registerHelper('splitLines', function (text) {
  return text ? text.split(';').map(s => s.trim()) : [];
});
This splits on semicolons and shows each line as a new bullet.

‚úÖ 9. TOP-OF-RESUME LOCATION
What‚Äôs wrong:
Some versions still show "SP, Brazil" or "Sorocaba" at the top.

Fix:
In resume.html, make sure the top header location pulls from header.location, not header.city.

handlebars
Copy
Edit
<p>{{header.location}}</p>
The header.location is already cleaned to just "Brazil" via openai.ts.

‚úÖ 10. PUNCTUATION IN SUMMARY + BULLETS
What‚Äôs wrong:
Summary ends without a period.
Some bullets show metrics again as trailing text (e.g. ‚Äú...increased win rate. 32% improvement‚Äù).

Fixes:

Ensure summary ends with a period programmatically

In resume.html, avoid rendering bullet.metrics as trailing fragments if already included in the bullet text

Once Done
Please confirm the following:

All above fixes implemented

Which files were changed (e.g., resume.html, openai.ts, etc.)

That the next test output is under 2 pages and visually correct

We‚Äôll review again after that. Thanks.








